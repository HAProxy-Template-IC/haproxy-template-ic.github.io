
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Helm chart for HAProxy Template IC">
      
      
      
        <link rel="canonical" href="https://haproxy-template-ic.github.io/helm-chart/dev/annotations/">
      
      
        <link rel="prev" href="../gateway-api/">
      
      
      
        
          <link rel="alternate" href="/controller/latest/" hreflang="controller">
        
      
      
      <link rel="icon" href="../assets/logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Annotations - HAProxy Template IC - Helm Chart</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#haproxy-tech-annotations-support" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="HAProxy Template IC - Helm Chart" class="md-header__button md-logo" aria-label="HAProxy Template IC - Helm Chart" data-md-component="logo">
      
  <img src="../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HAProxy Template IC - Helm Chart
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Annotations
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/controller/latest/" hreflang="controller" class="md-select__link">
              Controller Docs
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/HAProxy-Template-IC/haproxy-template-ingress-controller" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    HAProxy-Template-IC/haproxy-template-ingress-controller
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="HAProxy Template IC - Helm Chart" class="md-nav__button md-logo" aria-label="HAProxy Template IC - Helm Chart" data-md-component="logo">
      
  <img src="../assets/logo.svg" alt="logo">

    </a>
    HAProxy Template IC - Helm Chart
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/HAProxy-Template-IC/haproxy-template-ingress-controller" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    HAProxy-Template-IC/haproxy-template-ingress-controller
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../gateway-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gateway API
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Annotations
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Annotations
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-control-ip-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access Control &amp; IP Filtering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Access Control &amp; IP Filtering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgallowlist" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/allowlist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgdenylist" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/denylist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgwhitelist" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/whitelist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgblacklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/blacklist
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        CORS Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CORS Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-enable" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-enable
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-allow-origin" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-allow-origin
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-allow-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-allow-methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-allow-headers" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-allow-headers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-allow-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-allow-credentials
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-max-age" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-max-age
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rate-limiting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rate Limiting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rate Limiting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgrate-limit-requests" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/rate-limit-requests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgrate-limit-period" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/rate-limit-period
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgrate-limit-size" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/rate-limit-size
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgrate-limit-status-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/rate-limit-status-code
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requestresponse-header-manipulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Request/Response Header Manipulation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Request/Response Header Manipulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgrequest-set-header" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/request-set-header
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgresponse-set-header" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/response-set-header
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgset-host" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/set-host
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgforwarded-for" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/forwarded-for
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#path-manipulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path Manipulation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Path Manipulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgpath-rewrite" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/path-rewrite
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#request-redirect" class="md-nav__link">
    <span class="md-ellipsis">
      
        Request Redirect
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Request Redirect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgrequest-redirect" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/request-redirect
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgrequest-redirect-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/request-redirect-code
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssltls-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSL/TLS Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSL/TLS Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgssl-redirect" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/ssl-redirect
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgssl-redirect-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/ssl-redirect-code
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgssl-redirect-port" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/ssl-redirect-port
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgssl-passthrough" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/ssl-passthrough
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgserver-ssl" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/server-ssl
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgserver-proto" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/server-proto
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgserver-crt" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/server-crt
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgserver-ca" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/server-ca
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backend-health-checks-connection-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Backend Health Checks &amp; Connection Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backend Health Checks &amp; Connection Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgcheck" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/check
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcheck-http" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/check-http
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcheck-interval" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/check-interval
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-check" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-check
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgpod-maxconn" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/pod-maxconn
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgscale-server-slots" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/scale-server-slots
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-balancing-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Load Balancing Algorithms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Load Balancing Algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgload-balance" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/load-balance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-persistence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Session Persistence
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Session Persistence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgcookie-persistence" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cookie-persistence
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcookie-persistence-no-dynamic" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cookie-persistence-no-dynamic
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#timeouts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Timeouts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Timeouts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-client
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-connect" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-connect
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-http-request" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-http-request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-http-keep-alive" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-http-keep-alive
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-queue" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-queue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-tunnel" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-tunnel
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#request-capture-logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Request Capture &amp; Logging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Request Capture &amp; Logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgrequest-capture" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/request-capture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgrequest-capture-len" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/request-capture-len
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source-ip-detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source IP Detection
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Source IP Detection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgsrc-ip-header" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/src-ip-header
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-backend-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Backend Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Backend Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgbackend-config-snippet" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/backend-config-snippet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgsend-proxy-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/send-proxy-protocol
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgstandalone-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/standalone-backend
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgauth-type" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/auth-type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgauth-secret" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/auth-secret
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgauth-realm" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/auth-realm
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-limitations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Known Limitations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Known Limitations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#not-implemented" class="md-nav__link">
    <span class="md-ellipsis">
      
        Not Implemented
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-differences-from-haproxy-tech" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Differences from HAProxy Tech
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Coverage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Coverage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#well-tested" class="md-nav__link">
    <span class="md-ellipsis">
      
        Well-tested
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Annotations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-status-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Status Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access-control-ip-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access Control &amp; IP Filtering
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Access Control &amp; IP Filtering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgallowlist" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/allowlist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgdenylist" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/denylist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgwhitelist" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/whitelist
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgblacklist" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/blacklist
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cors-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        CORS Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CORS Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-enable" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-enable
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-allow-origin" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-allow-origin
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-allow-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-allow-methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-allow-headers" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-allow-headers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-allow-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-allow-credentials
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcors-max-age" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cors-max-age
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rate-limiting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rate Limiting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Rate Limiting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgrate-limit-requests" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/rate-limit-requests
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgrate-limit-period" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/rate-limit-period
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgrate-limit-size" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/rate-limit-size
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgrate-limit-status-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/rate-limit-status-code
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requestresponse-header-manipulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Request/Response Header Manipulation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Request/Response Header Manipulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgrequest-set-header" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/request-set-header
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgresponse-set-header" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/response-set-header
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgset-host" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/set-host
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgforwarded-for" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/forwarded-for
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#path-manipulation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Path Manipulation
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Path Manipulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgpath-rewrite" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/path-rewrite
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#request-redirect" class="md-nav__link">
    <span class="md-ellipsis">
      
        Request Redirect
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Request Redirect">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgrequest-redirect" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/request-redirect
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgrequest-redirect-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/request-redirect-code
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ssltls-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSL/TLS Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSL/TLS Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgssl-redirect" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/ssl-redirect
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgssl-redirect-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/ssl-redirect-code
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgssl-redirect-port" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/ssl-redirect-port
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgssl-passthrough" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/ssl-passthrough
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgserver-ssl" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/server-ssl
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgserver-proto" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/server-proto
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgserver-crt" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/server-crt
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgserver-ca" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/server-ca
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backend-health-checks-connection-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Backend Health Checks &amp; Connection Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Backend Health Checks &amp; Connection Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgcheck" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/check
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcheck-http" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/check-http
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcheck-interval" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/check-interval
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-check" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-check
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgpod-maxconn" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/pod-maxconn
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgscale-server-slots" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/scale-server-slots
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#load-balancing-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Load Balancing Algorithms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Load Balancing Algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgload-balance" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/load-balance
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-persistence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Session Persistence
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Session Persistence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgcookie-persistence" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cookie-persistence
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgcookie-persistence-no-dynamic" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/cookie-persistence-no-dynamic
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#timeouts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Timeouts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Timeouts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-server
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-client" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-client
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-connect" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-connect
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-http-request" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-http-request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-http-keep-alive" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-http-keep-alive
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-queue" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-queue
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgtimeout-tunnel" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/timeout-tunnel
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#request-capture-logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Request Capture &amp; Logging
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Request Capture &amp; Logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgrequest-capture" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/request-capture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgrequest-capture-len" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/request-capture-len
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source-ip-detection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Source IP Detection
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Source IP Detection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgsrc-ip-header" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/src-ip-header
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-backend-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Backend Configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Backend Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgbackend-config-snippet" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/backend-config-snippet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgsend-proxy-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/send-proxy-protocol
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgstandalone-backend" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/standalone-backend
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#haproxyorgauth-type" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/auth-type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgauth-secret" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/auth-secret
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#haproxyorgauth-realm" class="md-nav__link">
    <span class="md-ellipsis">
      
        haproxy.org/auth-realm
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#known-limitations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Known Limitations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Known Limitations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#not-implemented" class="md-nav__link">
    <span class="md-ellipsis">
      
        Not Implemented
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-differences-from-haproxy-tech" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Differences from HAProxy Tech
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-coverage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Testing Coverage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Testing Coverage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#well-tested" class="md-nav__link">
    <span class="md-ellipsis">
      
        Well-tested
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-annotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Other Annotations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-status-summary" class="md-nav__link">
    <span class="md-ellipsis">
      
        Implementation Status Summary
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="haproxy-tech-annotations-support">HAProxy Tech Annotations Support<a class="headerlink" href="#haproxy-tech-annotations-support" title="Permanent link">&para;</a></h1>
<p>The HAProxy Template Ingress Controller chart provides support for HAProxy Tech Ingress annotations through the <code>haproxytech.yaml</code> template library. This document describes which annotations from the <a href="https://www.haproxy.com/documentation/kubernetes-ingress/community/configuration-reference/ingress">HAProxy Ingress Controller</a> are currently supported.</p>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Annotation support is implemented as a template library that plugs into the controller's resource-agnostic architecture. The controller itself doesn't have built-in annotation handling - annotation support is added by the chart through template libraries.</p>
<p><strong>Enable HAProxy Tech annotation support:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># values.yaml</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">controller</span><span class="p">:</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nt">templateLibraries</span><span class="p">:</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nt">haproxytech</span><span class="p">:</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<p><strong>Important notes:</strong></p>
<ul>
<li>Annotations apply to <strong>Ingress resources only</strong> (not Services)</li>
<li>Gateway API resources (HTTPRoute, GRPCRoute) use filters instead of annotations - see <a href="../gateway-api/">Gateway API Support</a></li>
<li>All annotations use the <code>haproxy.org/</code> prefix</li>
<li>Multiple ingresses can share the same annotation values (deduplication is handled automatically)</li>
</ul>
<h2 id="access-control-ip-filtering">Access Control &amp; IP Filtering<a class="headerlink" href="#access-control-ip-filtering" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgallowlist">haproxy.org/allowlist<a class="headerlink" href="#haproxyorgallowlist" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Whitelist IP addresses or CIDR ranges that are allowed to access the ingress.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">protected-api</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="nt">haproxy.org/allowlist</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;192.168.1.0/24,</span><span class="nv"> </span><span class="s">10.0.0.1&quot;</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a># Frontend ACL
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>acl allowlist_192_168_1_0_24 src 192.168.1.0/24
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>acl allowlist_10_0_0_1 src 10.0.0.1
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>http-request deny if !allowlist_192_168_1_0_24 !allowlist_10_0_0_1
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Related annotations</strong>: Can be combined with <code>denylist</code></p>
<hr />
<h3 id="haproxyorgdenylist">haproxy.org/denylist<a class="headerlink" href="#haproxyorgdenylist" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Blacklist IP addresses or CIDR ranges that are denied access to the ingress.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">public-api</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="nt">haproxy.org/denylist</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;203.0.113.0/24,</span><span class="nv"> </span><span class="s">198.51.100.50&quot;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a># Frontend ACL
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>acl denylist_203_0_113_0_24 src 203.0.113.0/24
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>acl denylist_198_51_100_50 src 198.51.100.50
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>http-request deny if denylist_203_0_113_0_24 or denylist_198_51_100_50
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Related annotations</strong>: Can be combined with <code>allowlist</code></p>
<hr />
<h3 id="haproxyorgwhitelist">haproxy.org/whitelist<a class="headerlink" href="#haproxyorgwhitelist" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Not Implemented (Deprecated)</p>
<p><strong>Description</strong>: Legacy name for <code>allowlist</code>. Prefer using <code>allowlist</code> instead.</p>
<p><strong>Note</strong>: Deprecated in favor of <code>allowlist</code>. Not recommended for new implementations.</p>
<hr />
<h3 id="haproxyorgblacklist">haproxy.org/blacklist<a class="headerlink" href="#haproxyorgblacklist" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Not Implemented (Deprecated)</p>
<p><strong>Description</strong>: Legacy name for <code>denylist</code>. Prefer using <code>denylist</code> instead.</p>
<p><strong>Note</strong>: Deprecated in favor of <code>denylist</code>. Not recommended for new implementations.</p>
<hr />
<h2 id="cors-configuration">CORS Configuration<a class="headerlink" href="#cors-configuration" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgcors-enable">haproxy.org/cors-enable<a class="headerlink" href="#haproxyorgcors-enable" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Enable CORS (Cross-Origin Resource Sharing) processing for the ingress.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cors-api</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="nt">haproxy.org/cors-enable</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="nt">haproxy.org/cors-allow-origin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="nt">haproxy.org/cors-allow-methods</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">DELETE&quot;</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="nt">haproxy.org/cors-allow-headers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization&quot;</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a># Capture Origin header
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>http-request capture req.hdr(Origin) len 128
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a># Set CORS headers
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>http-response set-header Access-Control-Allow-Origin %[capture.req.hdr(0)]
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>http-response set-header Access-Control-Allow-Methods &quot;GET, POST, PUT, DELETE&quot;
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>http-response set-header Access-Control-Allow-Headers &quot;Content-Type, Authorization&quot;
</code></pre></div>
<p><strong>Dependencies</strong>: All other <code>cors-*</code> annotations require <code>cors-enable: "true"</code></p>
<hr />
<h3 id="haproxyorgcors-allow-origin">haproxy.org/cors-allow-origin<a class="headerlink" href="#haproxyorgcors-allow-origin" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Specifies allowed origins for CORS requests. Supports wildcard (<code>*</code>), exact URL, or regex pattern.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Wildcard (allow all origins)</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nt">haproxy.org/cors-allow-origin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*&quot;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="c1"># Exact match</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="nt">haproxy.org/cors-allow-origin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com&quot;</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="c1"># Regex pattern</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="nt">haproxy.org/cors-allow-origin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;^https://(.+\\.)?(example\\.com)(:\\d{1,5})?$&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a># Wildcard
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>http-response set-header Access-Control-Allow-Origin &quot;*&quot;
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a># Exact or regex match
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>http-response set-header Access-Control-Allow-Origin %[capture.req.hdr(0)] if { capture.req.hdr(0) -m reg ^https://(.+\.)?(example\.com)(:\d{1,5})?$ }
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>cors-enable: "true"</code></p>
<hr />
<h3 id="haproxyorgcors-allow-methods">haproxy.org/cors-allow-methods<a class="headerlink" href="#haproxyorgcors-allow-methods" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Specifies allowed HTTP methods for CORS requests.</p>
<p><strong>Valid values</strong>: GET, POST, PUT, DELETE, HEAD, CONNECT, OPTIONS, TRACE, PATCH</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nt">haproxy.org/cors-allow-methods</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;GET,</span><span class="nv"> </span><span class="s">POST,</span><span class="nv"> </span><span class="s">PUT,</span><span class="nv"> </span><span class="s">DELETE,</span><span class="nv"> </span><span class="s">OPTIONS&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>http-response set-header Access-Control-Allow-Methods &quot;GET, POST, PUT, DELETE, OPTIONS&quot;
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>cors-enable: "true"</code></p>
<hr />
<h3 id="haproxyorgcors-allow-headers">haproxy.org/cors-allow-headers<a class="headerlink" href="#haproxyorgcors-allow-headers" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Specifies allowed request headers for CORS requests.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">haproxy.org/cors-allow-headers</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Content-Type,</span><span class="nv"> </span><span class="s">Authorization,</span><span class="nv"> </span><span class="s">X-Requested-With&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>http-response set-header Access-Control-Allow-Headers &quot;Content-Type, Authorization, X-Requested-With&quot;
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>cors-enable: "true"</code></p>
<hr />
<h3 id="haproxyorgcors-allow-credentials">haproxy.org/cors-allow-credentials<a class="headerlink" href="#haproxyorgcors-allow-credentials" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Indicates whether credentials (cookies, authorization headers) can be included in CORS requests.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">haproxy.org/cors-allow-credentials</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>http-response set-header Access-Control-Allow-Credentials &quot;true&quot;
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>cors-enable: "true"</code></p>
<p><strong>Note</strong>: When <code>cors-allow-credentials: "true"</code>, <code>cors-allow-origin</code> cannot be <code>*</code> (must be specific origin)</p>
<hr />
<h3 id="haproxyorgcors-max-age">haproxy.org/cors-max-age<a class="headerlink" href="#haproxyorgcors-max-age" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Specifies how long (in seconds) preflight request results can be cached.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nt">haproxy.org/cors-max-age</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3600&quot;</span><span class="w">  </span><span class="c1"># 1 hour</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>http-response set-header Access-Control-Max-Age &quot;3600&quot;
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>cors-enable: "true"</code></p>
<hr />
<h2 id="rate-limiting">Rate Limiting<a class="headerlink" href="#rate-limiting" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgrate-limit-requests">haproxy.org/rate-limit-requests<a class="headerlink" href="#haproxyorgrate-limit-requests" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Maximum number of requests allowed in the specified time period (per source IP).</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rate-limited-api</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">    </span><span class="nt">haproxy.org/rate-limit-requests</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">    </span><span class="nt">haproxy.org/rate-limit-period</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1m&quot;</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">    </span><span class="nt">haproxy.org/rate-limit-size</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100k&quot;</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">    </span><span class="nt">haproxy.org/rate-limit-status-code</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;429&quot;</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api</span>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>backend api-backend
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>    stick-table type ip size 100k expire 1m store http_req_rate(1m)
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>    http-request track-sc0 src
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>    http-request deny deny_status 429 if { sc_http_req_rate(0) gt 100 }
</code></pre></div>
<p><strong>Dependencies</strong>: Other rate-limit annotations require this to be set</p>
<p><strong>Related annotations</strong>: <code>rate-limit-period</code>, <code>rate-limit-size</code>, <code>rate-limit-status-code</code></p>
<hr />
<h3 id="haproxyorgrate-limit-period">haproxy.org/rate-limit-period<a class="headerlink" href="#haproxyorgrate-limit-period" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Time window for rate limiting. Supports duration format (e.g., <code>10s</code>, <code>1m</code>, <code>1h</code>).</p>
<p><strong>Default</strong>: <code>1s</code> (1 second)</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nt">haproxy.org/rate-limit-period</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1m&quot;</span>
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>rate-limit-requests</code> to be set</p>
<hr />
<h3 id="haproxyorgrate-limit-size">haproxy.org/rate-limit-size<a class="headerlink" href="#haproxyorgrate-limit-size" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Size of the stick-table used to track client IPs. Supports suffixes <code>k</code> (thousands) or <code>M</code> (millions).</p>
<p><strong>Default</strong>: <code>100k</code> (100,000 entries)</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nt">haproxy.org/rate-limit-size</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100k&quot;</span><span class="w">  </span><span class="c1"># Track 100,000 IPs</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="nt">haproxy.org/rate-limit-size</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1000000&quot;</span><span class="w">  </span><span class="c1"># Track 1 million IPs</span>
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>rate-limit-requests</code> to be set</p>
<hr />
<h3 id="haproxyorgrate-limit-status-code">haproxy.org/rate-limit-status-code<a class="headerlink" href="#haproxyorgrate-limit-status-code" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: HTTP status code to return when rate limit is exceeded.</p>
<p><strong>Default</strong>: <code>403</code> (Forbidden)</p>
<p><strong>Common values</strong>: <code>403</code>, <code>429</code> (Too Many Requests), <code>503</code> (Service Unavailable)</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nt">haproxy.org/rate-limit-status-code</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;429&quot;</span>
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>rate-limit-requests</code> to be set</p>
<hr />
<h2 id="requestresponse-header-manipulation">Request/Response Header Manipulation<a class="headerlink" href="#requestresponse-header-manipulation" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgrequest-set-header">haproxy.org/request-set-header<a class="headerlink" href="#haproxyorgrequest-set-header" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Set or modify request headers before forwarding to backend. Multiline format with each line containing <code>HeaderName HeaderValue</code>.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">header-example</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">    </span><span class="nt">haproxy.org/request-set-header</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">      </span><span class="no">X-Forwarded-Proto https</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">      </span><span class="no">X-Custom-Header custom-value</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>http-request set-header X-Forwarded-Proto &quot;https&quot;
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>http-request set-header X-Custom-Header &quot;custom-value&quot;
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Related annotations</strong>: <code>response-set-header</code>, <code>set-host</code></p>
<hr />
<h3 id="haproxyorgresponse-set-header">haproxy.org/response-set-header<a class="headerlink" href="#haproxyorgresponse-set-header" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Set or modify response headers before returning to client. Multiline format with each line containing <code>HeaderName HeaderValue</code>.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">security-headers</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">    </span><span class="nt">haproxy.org/response-set-header</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">      </span><span class="no">Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot;</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">      </span><span class="no">X-Frame-Options DENY</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">      </span><span class="no">X-Content-Type-Options nosniff</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web-service</span>
<a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>http-response set-header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot;
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>http-response set-header X-Frame-Options &quot;DENY&quot;
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>http-response set-header X-Content-Type-Options &quot;nosniff&quot;
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Related annotations</strong>: <code>request-set-header</code></p>
<hr />
<h3 id="haproxyorgset-host">haproxy.org/set-host<a class="headerlink" href="#haproxyorgset-host" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Modify the Host header after backend selection. Different from <code>request-set-header Host</code> in timing.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nt">haproxy.org/set-host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;internal-api.example.svc.cluster.local&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>http-request set-header Host &quot;internal-api.example.svc.cluster.local&quot;
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Note</strong>: This happens after backend selection, while <code>request-set-header Host</code> happens before.</p>
<hr />
<h3 id="haproxyorgforwarded-for">haproxy.org/forwarded-for<a class="headerlink" href="#haproxyorgforwarded-for" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Add X-Forwarded-For header with client IP address.</p>
<p><strong>Default</strong>: <code>true</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nt">haproxy.org/forwarded-for</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>option forwardfor
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<hr />
<h2 id="path-manipulation">Path Manipulation<a class="headerlink" href="#path-manipulation" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgpath-rewrite">haproxy.org/path-rewrite<a class="headerlink" href="#haproxyorgpath-rewrite" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Rewrite request path using regex patterns before forwarding to backend. Supports two formats: single parameter (matches all paths) or two parameters (regex pattern and replacement).</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="c1"># Strip prefix: /api/v1/users -&gt; /users</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">path-rewrite-example</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">    </span><span class="nt">haproxy.org/path-rewrite</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="w">      </span><span class="no">^/api/v1/(.*) /\1</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/api/v1</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>http-request replace-path ^/api/v1/(.*) /\1
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Related annotations</strong>: Similar to Gateway API URLRewrite filter</p>
<hr />
<h2 id="request-redirect">Request Redirect<a class="headerlink" href="#request-redirect" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgrequest-redirect">haproxy.org/request-redirect<a class="headerlink" href="#haproxyorgrequest-redirect" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Redirect requests to a different host/port. Supports formats: <code>example.com</code>, <code>example.com:8888</code>, <code>https://example.com</code>, <code>http://example.com</code>.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redirect-example</span>
<a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a><span class="w">    </span><span class="nt">haproxy.org/request-redirect</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://new.example.com&quot;</span>
<a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a><span class="w">    </span><span class="nt">haproxy.org/request-redirect-code</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
<a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">old.example.com</span>
<a id="__codelineno-32-11" name="__codelineno-32-11" href="#__codelineno-32-11"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-32-12" name="__codelineno-32-12" href="#__codelineno-32-12"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-32-13" name="__codelineno-32-13" href="#__codelineno-32-13"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-32-14" name="__codelineno-32-14" href="#__codelineno-32-14"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-32-15" name="__codelineno-32-15" href="#__codelineno-32-15"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-32-16" name="__codelineno-32-16" href="#__codelineno-32-16"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-32-17" name="__codelineno-32-17" href="#__codelineno-32-17"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">placeholder-service</span>
<a id="__codelineno-32-18" name="__codelineno-32-18" href="#__codelineno-32-18"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-32-19" name="__codelineno-32-19" href="#__codelineno-32-19"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>http-request redirect location https://new.example.com code 301
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Related annotations</strong>: <code>request-redirect-code</code></p>
<hr />
<h3 id="haproxyorgrequest-redirect-code">haproxy.org/request-redirect-code<a class="headerlink" href="#haproxyorgrequest-redirect-code" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: HTTP status code for redirect.</p>
<p><strong>Default</strong>: <code>302</code> (Found)</p>
<p><strong>Valid values</strong>: <code>301</code> (Moved Permanently), <code>302</code> (Found), <code>303</code> (See Other), <code>307</code> (Temporary Redirect), <code>308</code> (Permanent Redirect)</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="nt">haproxy.org/request-redirect-code</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>request-redirect</code> to be set</p>
<hr />
<h2 id="ssltls-configuration">SSL/TLS Configuration<a class="headerlink" href="#ssltls-configuration" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgssl-redirect">haproxy.org/ssl-redirect<a class="headerlink" href="#haproxyorgssl-redirect" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Force HTTPS redirect for HTTP requests. Automatically enabled when TLS secrets are present in the ingress.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssl-redirect-example</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="w">    </span><span class="nt">haproxy.org/ssl-redirect</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="w">    </span><span class="nt">haproxy.org/ssl-redirect-code</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="w">  </span><span class="nt">tls</span><span class="p">:</span>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hosts</span><span class="p">:</span>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="w">      </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example-tls</span>
<a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-35-14" name="__codelineno-35-14" href="#__codelineno-35-14"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example.com</span>
<a id="__codelineno-35-15" name="__codelineno-35-15" href="#__codelineno-35-15"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-35-16" name="__codelineno-35-16" href="#__codelineno-35-16"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-35-17" name="__codelineno-35-17" href="#__codelineno-35-17"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-35-18" name="__codelineno-35-18" href="#__codelineno-35-18"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-35-19" name="__codelineno-35-19" href="#__codelineno-35-19"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-35-20" name="__codelineno-35-20" href="#__codelineno-35-20"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-35-21" name="__codelineno-35-21" href="#__codelineno-35-21"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web-service</span>
<a id="__codelineno-35-22" name="__codelineno-35-22" href="#__codelineno-35-22"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-35-23" name="__codelineno-35-23" href="#__codelineno-35-23"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>http-request redirect scheme https code 301 if !{ ssl_fc }
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Related annotations</strong>: <code>ssl-redirect-code</code>, <code>ssl-redirect-port</code></p>
<hr />
<h3 id="haproxyorgssl-redirect-code">haproxy.org/ssl-redirect-code<a class="headerlink" href="#haproxyorgssl-redirect-code" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: HTTP status code for SSL redirect.</p>
<p><strong>Default</strong>: <code>302</code></p>
<p><strong>Valid values</strong>: <code>301</code>, <code>302</code>, <code>303</code>, <code>307</code>, <code>308</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="nt">haproxy.org/ssl-redirect-code</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;301&quot;</span>
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>ssl-redirect: "true"</code></p>
<hr />
<h3 id="haproxyorgssl-redirect-port">haproxy.org/ssl-redirect-port<a class="headerlink" href="#haproxyorgssl-redirect-port" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Target HTTPS port for SSL redirect.</p>
<p><strong>Default</strong>: <code>443</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nt">haproxy.org/ssl-redirect-port</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;8443&quot;</span>
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>ssl-redirect: "true"</code></p>
<hr />
<h3 id="haproxyorgssl-passthrough">haproxy.org/ssl-passthrough<a class="headerlink" href="#haproxyorgssl-passthrough" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Enable TCP mode SSL passthrough (Layer 4) for specific ingresses while allowing SSL termination for others. Uses SNI-based routing with unix socket loopback to support mixed passthrough and termination traffic.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ssl-passthrough-example</span>
<a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="w">    </span><span class="nt">haproxy.org/ssl-passthrough</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="w">  </span><span class="nt">tls</span><span class="p">:</span>
<a id="__codelineno-39-9" name="__codelineno-39-9" href="#__codelineno-39-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hosts</span><span class="p">:</span>
<a id="__codelineno-39-10" name="__codelineno-39-10" href="#__codelineno-39-10"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secure.example.com</span>
<a id="__codelineno-39-11" name="__codelineno-39-11" href="#__codelineno-39-11"></a><span class="w">      </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">example-tls</span>
<a id="__codelineno-39-12" name="__codelineno-39-12" href="#__codelineno-39-12"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-39-13" name="__codelineno-39-13" href="#__codelineno-39-13"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secure.example.com</span>
<a id="__codelineno-39-14" name="__codelineno-39-14" href="#__codelineno-39-14"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-39-15" name="__codelineno-39-15" href="#__codelineno-39-15"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-39-16" name="__codelineno-39-16" href="#__codelineno-39-16"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-39-17" name="__codelineno-39-17" href="#__codelineno-39-17"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-39-18" name="__codelineno-39-18" href="#__codelineno-39-18"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-39-19" name="__codelineno-39-19" href="#__codelineno-39-19"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-39-20" name="__codelineno-39-20" href="#__codelineno-39-20"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secure-service</span>
<a id="__codelineno-39-21" name="__codelineno-39-21" href="#__codelineno-39-21"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-39-22" name="__codelineno-39-22" href="#__codelineno-39-22"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">443</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a># TCP frontend for SNI-based routing
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>frontend ssl-tcp
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>    mode tcp
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>    bind *:443
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>    tcp-request inspect-delay 5s
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>    tcp-request content accept if { req_ssl_hello_type 1 }
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a>    use_backend ssl-passthrough-default-ssl-passthrough-ingress if { req_ssl_sni -m str secure.example.com }
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a>    default_backend ssl-loopback
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a># HTTPS frontend on unix socket (for SSL termination)
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a>frontend ssl-https
<a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a>    mode http
<a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a>    bind unix@/etc/haproxy/ssl-frontend.sock mode 660 accept-proxy
<a id="__codelineno-40-14" name="__codelineno-40-14" href="#__codelineno-40-14"></a>    # Standard HTTP routing logic applies here
<a id="__codelineno-40-15" name="__codelineno-40-15" href="#__codelineno-40-15"></a>
<a id="__codelineno-40-16" name="__codelineno-40-16" href="#__codelineno-40-16"></a># SSL passthrough backend (TCP mode)
<a id="__codelineno-40-17" name="__codelineno-40-17" href="#__codelineno-40-17"></a>backend ssl-passthrough-default-ssl-passthrough-ingress
<a id="__codelineno-40-18" name="__codelineno-40-18" href="#__codelineno-40-18"></a>    mode tcp
<a id="__codelineno-40-19" name="__codelineno-40-19" href="#__codelineno-40-19"></a>    balance roundrobin
<a id="__codelineno-40-20" name="__codelineno-40-20" href="#__codelineno-40-20"></a>    server SRV_1 10.0.1.30:8443 check
<a id="__codelineno-40-21" name="__codelineno-40-21" href="#__codelineno-40-21"></a>
<a id="__codelineno-40-22" name="__codelineno-40-22" href="#__codelineno-40-22"></a># Loopback backend for SSL termination
<a id="__codelineno-40-23" name="__codelineno-40-23" href="#__codelineno-40-23"></a>backend ssl-loopback
<a id="__codelineno-40-24" name="__codelineno-40-24" href="#__codelineno-40-24"></a>    mode tcp
<a id="__codelineno-40-25" name="__codelineno-40-25" href="#__codelineno-40-25"></a>    server loopback unix@/etc/haproxy/ssl-frontend.sock send-proxy-v2
</code></pre></div>
<p><strong>Implementation Notes</strong>:</p>
<ul>
<li>Uses unix socket loopback pattern to support mixed passthrough and termination</li>
<li>TCP frontend extracts SNI without terminating SSL</li>
<li>Passthrough traffic routes directly to backend pods</li>
<li>Non-passthrough traffic routes to unix socket frontend for SSL termination</li>
<li>PROXY protocol v2 preserves client IP information</li>
</ul>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Warning</strong>: For passthrough traffic, HTTP-level features (headers, path rewriting, etc.) are unavailable. Non-passthrough traffic on other hosts continues to support all HTTP features.</p>
<hr />
<h3 id="haproxyorgserver-ssl">haproxy.org/server-ssl<a class="headerlink" href="#haproxyorgserver-ssl" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Enable SSL/TLS connection to backend servers.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="nt">haproxy.org/server-ssl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>server pod1 10.0.1.5:8443 ssl verify none
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Related annotations</strong>: <code>server-proto</code>, <code>server-crt</code>, <code>server-ca</code></p>
<hr />
<h3 id="haproxyorgserver-proto">haproxy.org/server-proto<a class="headerlink" href="#haproxyorgserver-proto" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Backend protocol (typically <code>h2</code> for HTTP/2).</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="nt">haproxy.org/server-ssl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="nt">haproxy.org/server-proto</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;h2&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>server pod1 10.0.1.5:8443 ssl verify none proto h2
</code></pre></div>
<p><strong>Dependencies</strong>: Typically used with <code>server-ssl</code></p>
<hr />
<h3 id="haproxyorgserver-crt">haproxy.org/server-crt<a class="headerlink" href="#haproxyorgserver-crt" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Client certificate for mTLS (mutual TLS) to backend. References a Secret containing <code>tls.crt</code> and <code>tls.key</code>. Supports cross-namespace format <code>namespace/secretname</code>.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="nt">haproxy.org/server-ssl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="nt">haproxy.org/server-crt</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default/client-cert&quot;</span>
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a><span class="nt">haproxy.org/server-ca</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default/ca-cert&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>server pod1 10.0.1.5:8443 ssl crt /etc/haproxy/certs/client-cert.pem ca-file /etc/haproxy/certs/ca-cert.pem verify required
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>server-ssl: "true"</code></p>
<p><strong>Related annotations</strong>: <code>server-ca</code> (required for verification)</p>
<hr />
<h3 id="haproxyorgserver-ca">haproxy.org/server-ca<a class="headerlink" href="#haproxyorgserver-ca" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: CA certificate for verifying backend server certificates. References a Secret containing <code>tls.crt</code>. Supports cross-namespace format <code>namespace/secretname</code>.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="nt">haproxy.org/server-ssl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="nt">haproxy.org/server-ca</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default/ca-cert&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>server pod1 10.0.1.5:8443 ssl ca-file /etc/haproxy/certs/ca-cert.pem verify required
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>server-ssl: "true"</code></p>
<p><strong>Related annotations</strong>: <code>server-crt</code> (for mTLS)</p>
<hr />
<h2 id="backend-health-checks-connection-management">Backend Health Checks &amp; Connection Management<a class="headerlink" href="#backend-health-checks-connection-management" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgcheck">haproxy.org/check<a class="headerlink" href="#haproxyorgcheck" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Enable health checks for backend servers.</p>
<p><strong>Default</strong>: <code>true</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="nt">haproxy.org/check</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>server pod1 10.0.1.5:8080 check
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Related annotations</strong>: <code>check-http</code>, <code>check-interval</code>, <code>timeout-check</code></p>
<hr />
<h3 id="haproxyorgcheck-http">haproxy.org/check-http<a class="headerlink" href="#haproxyorgcheck-http" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: HTTP URI or full HTTP request for health checks.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="c1"># Simple URI</span>
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="nt">haproxy.org/check</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="nt">haproxy.org/check-http</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/health&quot;</span>
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a><span class="c1"># Full HTTP request</span>
<a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a><span class="nt">haproxy.org/check-http</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HEAD</span><span class="nv"> </span><span class="s">/health</span><span class="nv"> </span><span class="s">HTTP/1.1&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a># Simple URI
<a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>option httpchk GET /health
<a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a>
<a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a># Full HTTP request
<a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>option httpchk HEAD /health HTTP/1.1
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>check: "true"</code></p>
<hr />
<h3 id="haproxyorgcheck-interval">haproxy.org/check-interval<a class="headerlink" href="#haproxyorgcheck-interval" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Frequency of health checks. Supports duration format (e.g., <code>10s</code>, <code>1m</code>).</p>
<p><strong>Default</strong>: <code>2s</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="nt">haproxy.org/check</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a><span class="nt">haproxy.org/check-interval</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>server pod1 10.0.1.5:8080 check inter 10s
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>check: "true"</code></p>
<hr />
<h3 id="haproxyorgtimeout-check">haproxy.org/timeout-check<a class="headerlink" href="#haproxyorgtimeout-check" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Timeout for health check responses. Supports duration format.</p>
<p><strong>Default</strong>: <code>5s</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="nt">haproxy.org/timeout-check</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;3s&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>timeout check 3s
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<hr />
<h3 id="haproxyorgpod-maxconn">haproxy.org/pod-maxconn<a class="headerlink" href="#haproxyorgpod-maxconn" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Maximum total concurrent connections for all backend pods combined, automatically divided equally among HAProxy controller replicas with ceiling rounding.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="nt">haproxy.org/pod-maxconn</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
</code></pre></div>
<p><strong>Behavior</strong>:</p>
<p>The annotation value represents the <strong>total</strong> maximum connections across all HAProxy replicas. The controller automatically:
- Counts running HAProxy controller pods
- Divides the total by the pod count (ceiling rounding)
- Applies the per-pod value to each server line</p>
<p><strong>Examples</strong>:</p>
<p><strong>Single HAProxy pod</strong>: Value applied directly without division
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="w">    </span><span class="nt">haproxy.org/pod-maxconn</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
</code></pre></div></p>
<p>Generated HAProxy configuration (1 HAProxy pod):
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a># pod-maxconn: 100 total / 1 HAProxy pods = 100 per pod
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>server SRV_1 10.0.1.5:8080 maxconn 100 check
</code></pre></div></p>
<p><strong>Multiple HAProxy pods</strong>: Value divided equally with ceiling rounding
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="w">    </span><span class="nt">haproxy.org/pod-maxconn</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
</code></pre></div></p>
<p>Generated HAProxy configuration (2 HAProxy pods):
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a># pod-maxconn: 100 total / 2 HAProxy pods = 50 per pod
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>server SRV_1 10.0.1.5:8080 maxconn 50 check
</code></pre></div></p>
<p>Generated HAProxy configuration (3 HAProxy pods, with ceiling rounding):
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a># pod-maxconn: 100 total / 3 HAProxy pods = 34 per pod
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a>server SRV_1 10.0.1.5:8080 maxconn 34 check
</code></pre></div></p>
<p><strong>Fallback behavior</strong>: If no HAProxy pods are discovered yet (e.g., during initial startup), the full value is used temporarily until pod discovery completes.</p>
<p><strong>Dependencies</strong>: Requires HAProxy pod discovery to be operational for automatic division</p>
<hr />
<h3 id="haproxyorgscale-server-slots">haproxy.org/scale-server-slots<a class="headerlink" href="#haproxyorgscale-server-slots" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Number of server slots to pre-allocate for dynamic scaling.</p>
<p><strong>Default</strong>: <code>10</code> (template default; HAProxy Ingress Controller uses <code>42</code>)</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="nt">haproxy.org/scale-server-slots</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;100&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a># Pre-allocates 100 server slots for dynamic pod scaling
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>server pod1 10.0.1.5:8080
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a>server pod2 10.0.1.6:8080
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a># ... up to 100 slots
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Note</strong>: Used for runtime server addition/removal without config reload.</p>
<hr />
<h2 id="load-balancing-algorithms">Load Balancing Algorithms<a class="headerlink" href="#load-balancing-algorithms" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgload-balance">haproxy.org/load-balance<a class="headerlink" href="#haproxyorgload-balance" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Load balancing algorithm for distributing traffic across backend servers.</p>
<p><strong>Default</strong>: <code>roundrobin</code></p>
<p><strong>Valid values</strong>: <code>roundrobin</code>, <code>leastconn</code>, <code>source</code>, <code>uri</code>, <code>hdr</code>, <code>random</code>, <code>rdp-cookie</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">load-balance-example</span>
<a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="w">    </span><span class="nt">haproxy.org/load-balance</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;leastconn&quot;</span>
<a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-65-12" name="__codelineno-65-12" href="#__codelineno-65-12"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-65-13" name="__codelineno-65-13" href="#__codelineno-65-13"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-65-14" name="__codelineno-65-14" href="#__codelineno-65-14"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-65-15" name="__codelineno-65-15" href="#__codelineno-65-15"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-65-16" name="__codelineno-65-16" href="#__codelineno-65-16"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<a id="__codelineno-65-17" name="__codelineno-65-17" href="#__codelineno-65-17"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-65-18" name="__codelineno-65-18" href="#__codelineno-65-18"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a>backend api-backend
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a>    balance leastconn
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<hr />
<h2 id="session-persistence">Session Persistence<a class="headerlink" href="#session-persistence" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgcookie-persistence">haproxy.org/cookie-persistence<a class="headerlink" href="#haproxyorgcookie-persistence" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Enable sticky sessions using dynamic cookies. The cookie value is dynamically generated per server.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sticky-sessions</span>
<a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a><span class="w">    </span><span class="nt">haproxy.org/cookie-persistence</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SERVERID&quot;</span>
<a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app.example.com</span>
<a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-67-12" name="__codelineno-67-12" href="#__codelineno-67-12"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-67-13" name="__codelineno-67-13" href="#__codelineno-67-13"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-67-14" name="__codelineno-67-14" href="#__codelineno-67-14"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-67-15" name="__codelineno-67-15" href="#__codelineno-67-15"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-67-16" name="__codelineno-67-16" href="#__codelineno-67-16"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-service</span>
<a id="__codelineno-67-17" name="__codelineno-67-17" href="#__codelineno-67-17"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-67-18" name="__codelineno-67-18" href="#__codelineno-67-18"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a>backend app-backend
<a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>    cookie SERVERID insert indirect nocache dynamic
<a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a>    dynamic-cookie-key &lt;generated-key&gt;
<a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a>    server pod1 10.0.1.5:8080 cookie pod1
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Note</strong>: For multi-instance setups, dynamic cookies ensure consistency across controller instances.</p>
<hr />
<h3 id="haproxyorgcookie-persistence-no-dynamic">haproxy.org/cookie-persistence-no-dynamic<a class="headerlink" href="#haproxyorgcookie-persistence-no-dynamic" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Enable sticky sessions using static cookies (without dynamic-cookie-key). Use only in single-instance controller deployments.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">static-sticky-sessions</span>
<a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a><span class="w">    </span><span class="nt">haproxy.org/cookie-persistence-no-dynamic</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SERVERID&quot;</span>
<a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app.example.com</span>
<a id="__codelineno-69-10" name="__codelineno-69-10" href="#__codelineno-69-10"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-69-11" name="__codelineno-69-11" href="#__codelineno-69-11"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-69-12" name="__codelineno-69-12" href="#__codelineno-69-12"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-69-13" name="__codelineno-69-13" href="#__codelineno-69-13"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-69-14" name="__codelineno-69-14" href="#__codelineno-69-14"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-69-15" name="__codelineno-69-15" href="#__codelineno-69-15"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-69-16" name="__codelineno-69-16" href="#__codelineno-69-16"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-service</span>
<a id="__codelineno-69-17" name="__codelineno-69-17" href="#__codelineno-69-17"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-69-18" name="__codelineno-69-18" href="#__codelineno-69-18"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a>backend app-backend
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a>    cookie SERVERID insert indirect nocache
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a>    server pod1 10.0.1.5:8080 cookie pod1
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Note</strong>: Mutually exclusive with <code>cookie-persistence</code>. For multi-instance deployments, use <code>cookie-persistence</code> (dynamic mode) instead to ensure consistent cookie values across controller instances.</p>
<p><strong>Warning</strong>: Static cookies will differ across controller instances, breaking session affinity. Only use in single-instance deployments.</p>
<hr />
<h2 id="timeouts">Timeouts<a class="headerlink" href="#timeouts" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgtimeout-server">haproxy.org/timeout-server<a class="headerlink" href="#haproxyorgtimeout-server" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Maximum time to wait for backend server response. Supports duration format.</p>
<p><strong>Default</strong>: <code>50s</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="nt">haproxy.org/timeout-server</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30s&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a>timeout server 30s
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<hr />
<h3 id="haproxyorgtimeout-client">haproxy.org/timeout-client<a class="headerlink" href="#haproxyorgtimeout-client" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Maximum inactivity time on client side. Supports duration format.</p>
<p><strong>Default</strong>: <code>50s</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="nt">haproxy.org/timeout-client</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;60s&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a>timeout client 60s
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<hr />
<h3 id="haproxyorgtimeout-connect">haproxy.org/timeout-connect<a class="headerlink" href="#haproxyorgtimeout-connect" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Maximum time to wait for backend connection. Supports duration format.</p>
<p><strong>Default</strong>: <code>5s</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="nt">haproxy.org/timeout-connect</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a>timeout connect 10s
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<hr />
<h3 id="haproxyorgtimeout-http-request">haproxy.org/timeout-http-request<a class="headerlink" href="#haproxyorgtimeout-http-request" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Maximum time to wait for complete HTTP request. Supports duration format.</p>
<p><strong>Default</strong>: <code>5s</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="nt">haproxy.org/timeout-http-request</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;10s&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a>timeout http-request 10s
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<hr />
<h3 id="haproxyorgtimeout-http-keep-alive">haproxy.org/timeout-http-keep-alive<a class="headerlink" href="#haproxyorgtimeout-http-keep-alive" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Maximum time to wait for a new HTTP request on a keep-alive connection. Supports duration format.</p>
<p><strong>Default</strong>: <code>1m</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="nt">haproxy.org/timeout-http-keep-alive</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2m&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a>timeout http-keep-alive 2m
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<hr />
<h3 id="haproxyorgtimeout-queue">haproxy.org/timeout-queue<a class="headerlink" href="#haproxyorgtimeout-queue" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Maximum time a request can wait in queue when all backend servers are busy. Supports duration format.</p>
<p><strong>Default</strong>: <code>5s</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="nt">haproxy.org/timeout-queue</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;30s&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a>timeout queue 30s
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<hr />
<h3 id="haproxyorgtimeout-tunnel">haproxy.org/timeout-tunnel<a class="headerlink" href="#haproxyorgtimeout-tunnel" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Maximum inactivity time on tunnel connections (WebSocket, CONNECT). Supports duration format.</p>
<p><strong>Default</strong>: <code>1h</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="nt">haproxy.org/timeout-tunnel</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2h&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a>timeout tunnel 2h
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<hr />
<h2 id="request-capture-logging">Request Capture &amp; Logging<a class="headerlink" href="#request-capture-logging" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgrequest-capture">haproxy.org/request-capture<a class="headerlink" href="#haproxyorgrequest-capture" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Capture request data for logging. Multiline format with HAProxy sample expressions.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">logging-example</span>
<a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-85-6" name="__codelineno-85-6" href="#__codelineno-85-6"></a><span class="w">    </span><span class="nt">haproxy.org/request-capture</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-85-7" name="__codelineno-85-7" href="#__codelineno-85-7"></a><span class="w">      </span><span class="no">hdr(User-Agent)</span>
<a id="__codelineno-85-8" name="__codelineno-85-8" href="#__codelineno-85-8"></a><span class="w">      </span><span class="no">cookie(session)</span>
<a id="__codelineno-85-9" name="__codelineno-85-9" href="#__codelineno-85-9"></a><span class="w">      </span><span class="no">path</span>
<a id="__codelineno-85-10" name="__codelineno-85-10" href="#__codelineno-85-10"></a><span class="w">      </span><span class="no">method</span>
<a id="__codelineno-85-11" name="__codelineno-85-11" href="#__codelineno-85-11"></a><span class="w">    </span><span class="nt">haproxy.org/request-capture-len</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;256&quot;</span>
<a id="__codelineno-85-12" name="__codelineno-85-12" href="#__codelineno-85-12"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-85-13" name="__codelineno-85-13" href="#__codelineno-85-13"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-85-14" name="__codelineno-85-14" href="#__codelineno-85-14"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<a id="__codelineno-85-15" name="__codelineno-85-15" href="#__codelineno-85-15"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-85-16" name="__codelineno-85-16" href="#__codelineno-85-16"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-85-17" name="__codelineno-85-17" href="#__codelineno-85-17"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-85-18" name="__codelineno-85-18" href="#__codelineno-85-18"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-85-19" name="__codelineno-85-19" href="#__codelineno-85-19"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-85-20" name="__codelineno-85-20" href="#__codelineno-85-20"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-85-21" name="__codelineno-85-21" href="#__codelineno-85-21"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<a id="__codelineno-85-22" name="__codelineno-85-22" href="#__codelineno-85-22"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-85-23" name="__codelineno-85-23" href="#__codelineno-85-23"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a>capture request header User-Agent len 256
<a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a>capture request header Cookie len 256
<a id="__codelineno-86-3" name="__codelineno-86-3" href="#__codelineno-86-3"></a># path and method captured via special handling
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Related annotations</strong>: <code>request-capture-len</code></p>
<hr />
<h3 id="haproxyorgrequest-capture-len">haproxy.org/request-capture-len<a class="headerlink" href="#haproxyorgrequest-capture-len" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Maximum length for captured request data.</p>
<p><strong>Default</strong>: <code>128</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a><span class="nt">haproxy.org/request-capture-len</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;256&quot;</span>
</code></pre></div>
<p><strong>Dependencies</strong>: Applies to <code>request-capture</code> expressions</p>
<hr />
<h2 id="source-ip-detection">Source IP Detection<a class="headerlink" href="#source-ip-detection" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgsrc-ip-header">haproxy.org/src-ip-header<a class="headerlink" href="#haproxyorgsrc-ip-header" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Extract true client IP from a specific header (useful when behind proxies/CDNs).</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a><span class="c1"># Behind Cloudflare</span>
<a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a><span class="nt">haproxy.org/src-ip-header</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;CF-Connecting-IP&quot;</span>
<a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a>
<a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a><span class="c1"># Behind AWS ALB</span>
<a id="__codelineno-88-5" name="__codelineno-88-5" href="#__codelineno-88-5"></a><span class="nt">haproxy.org/src-ip-header</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;X-Forwarded-For&quot;</span>
<a id="__codelineno-88-6" name="__codelineno-88-6" href="#__codelineno-88-6"></a>
<a id="__codelineno-88-7" name="__codelineno-88-7" href="#__codelineno-88-7"></a><span class="c1"># Behind custom proxy</span>
<a id="__codelineno-88-8" name="__codelineno-88-8" href="#__codelineno-88-8"></a><span class="nt">haproxy.org/src-ip-header</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;True-Client-IP&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-89-1" name="__codelineno-89-1" href="#__codelineno-89-1"></a>http-request set-src hdr(CF-Connecting-IP)
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Note</strong>: Use with caution - ensure the header is set by a trusted proxy.</p>
<hr />
<h2 id="advanced-backend-configuration">Advanced Backend Configuration<a class="headerlink" href="#advanced-backend-configuration" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgbackend-config-snippet">haproxy.org/backend-config-snippet<a class="headerlink" href="#haproxyorgbackend-config-snippet" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Inject raw HAProxy configuration directives into backend section. Multiline YAML string.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-90-1" name="__codelineno-90-1" href="#__codelineno-90-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-90-2" name="__codelineno-90-2" href="#__codelineno-90-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-90-3" name="__codelineno-90-3" href="#__codelineno-90-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-90-4" name="__codelineno-90-4" href="#__codelineno-90-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">advanced-backend</span>
<a id="__codelineno-90-5" name="__codelineno-90-5" href="#__codelineno-90-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-90-6" name="__codelineno-90-6" href="#__codelineno-90-6"></a><span class="w">    </span><span class="nt">haproxy.org/backend-config-snippet</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-90-7" name="__codelineno-90-7" href="#__codelineno-90-7"></a><span class="w">      </span><span class="no">stick-table type string len 32 size 100k expire 30m</span>
<a id="__codelineno-90-8" name="__codelineno-90-8" href="#__codelineno-90-8"></a><span class="w">      </span><span class="no">stick store-response res.cook(JSESSIONID)</span>
<a id="__codelineno-90-9" name="__codelineno-90-9" href="#__codelineno-90-9"></a><span class="w">      </span><span class="no">http-send-name-header X-Backend-Server</span>
<a id="__codelineno-90-10" name="__codelineno-90-10" href="#__codelineno-90-10"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-90-11" name="__codelineno-90-11" href="#__codelineno-90-11"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-90-12" name="__codelineno-90-12" href="#__codelineno-90-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app.example.com</span>
<a id="__codelineno-90-13" name="__codelineno-90-13" href="#__codelineno-90-13"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-90-14" name="__codelineno-90-14" href="#__codelineno-90-14"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-90-15" name="__codelineno-90-15" href="#__codelineno-90-15"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-90-16" name="__codelineno-90-16" href="#__codelineno-90-16"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-90-17" name="__codelineno-90-17" href="#__codelineno-90-17"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-90-18" name="__codelineno-90-18" href="#__codelineno-90-18"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-90-19" name="__codelineno-90-19" href="#__codelineno-90-19"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">app-service</span>
<a id="__codelineno-90-20" name="__codelineno-90-20" href="#__codelineno-90-20"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-90-21" name="__codelineno-90-21" href="#__codelineno-90-21"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-91-1" name="__codelineno-91-1" href="#__codelineno-91-1"></a>backend app-backend
<a id="__codelineno-91-2" name="__codelineno-91-2" href="#__codelineno-91-2"></a>    stick-table type string len 32 size 100k expire 30m
<a id="__codelineno-91-3" name="__codelineno-91-3" href="#__codelineno-91-3"></a>    stick store-response res.cook(JSESSIONID)
<a id="__codelineno-91-4" name="__codelineno-91-4" href="#__codelineno-91-4"></a>    http-send-name-header X-Backend-Server
<a id="__codelineno-91-5" name="__codelineno-91-5" href="#__codelineno-91-5"></a>    # ... other backend config
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Warning</strong>: Raw config injection bypasses validation. User is responsible for correct syntax.</p>
<hr />
<h3 id="haproxyorgsend-proxy-protocol">haproxy.org/send-proxy-protocol<a class="headerlink" href="#haproxyorgsend-proxy-protocol" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Enable PROXY protocol for backend connections to preserve client IP information.</p>
<p><strong>Valid values</strong>: <code>proxy</code>, <code>proxy-v1</code>, <code>proxy-v2</code>, <code>proxy-v2-ssl</code>, <code>proxy-v2-ssl-cn</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-92-1" name="__codelineno-92-1" href="#__codelineno-92-1"></a><span class="nt">haproxy.org/send-proxy-protocol</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;proxy-v2&quot;</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-93-1" name="__codelineno-93-1" href="#__codelineno-93-1"></a>server pod1 10.0.1.5:8080 send-proxy-v2
</code></pre></div>
<p><strong>Dependencies</strong>: None</p>
<p><strong>Note</strong>: Backend application must support PROXY protocol.</p>
<hr />
<h3 id="haproxyorgstandalone-backend">haproxy.org/standalone-backend<a class="headerlink" href="#haproxyorgstandalone-backend" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Not Implemented (Not Planned)</p>
<p><strong>Description</strong>: Create a dedicated backend for this ingress instead of sharing backends across ingresses.</p>
<p><strong>Note</strong>: This controller's architecture already generates standalone backends (one backend per ingress+service+port combination) rather than sharing backends across ingresses. Each unique combination of <code>namespace/ingress-name/service-name/port</code> gets its own dedicated backend, making this annotation redundant. Implementation is not planned.</p>
<hr />
<h2 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">&para;</a></h2>
<h3 id="haproxyorgauth-type">haproxy.org/auth-type<a class="headerlink" href="#haproxyorgauth-type" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Type of authentication to enforce. Currently only <code>basic-auth</code> is supported.</p>
<p><strong>Valid values</strong>: <code>basic-auth</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-94-1" name="__codelineno-94-1" href="#__codelineno-94-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">networking.k8s.io/v1</span>
<a id="__codelineno-94-2" name="__codelineno-94-2" href="#__codelineno-94-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ingress</span>
<a id="__codelineno-94-3" name="__codelineno-94-3" href="#__codelineno-94-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-94-4" name="__codelineno-94-4" href="#__codelineno-94-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">protected-api</span>
<a id="__codelineno-94-5" name="__codelineno-94-5" href="#__codelineno-94-5"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span>
<a id="__codelineno-94-6" name="__codelineno-94-6" href="#__codelineno-94-6"></a><span class="w">    </span><span class="nt">haproxy.org/auth-type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">basic-auth</span>
<a id="__codelineno-94-7" name="__codelineno-94-7" href="#__codelineno-94-7"></a><span class="w">    </span><span class="nt">haproxy.org/auth-secret</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auth-credentials</span>
<a id="__codelineno-94-8" name="__codelineno-94-8" href="#__codelineno-94-8"></a><span class="w">    </span><span class="nt">haproxy.org/auth-realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;API</span><span class="nv"> </span><span class="s">Access&quot;</span>
<a id="__codelineno-94-9" name="__codelineno-94-9" href="#__codelineno-94-9"></a><span class="nt">spec</span><span class="p">:</span>
<a id="__codelineno-94-10" name="__codelineno-94-10" href="#__codelineno-94-10"></a><span class="w">  </span><span class="nt">rules</span><span class="p">:</span>
<a id="__codelineno-94-11" name="__codelineno-94-11" href="#__codelineno-94-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api.example.com</span>
<a id="__codelineno-94-12" name="__codelineno-94-12" href="#__codelineno-94-12"></a><span class="w">      </span><span class="nt">http</span><span class="p">:</span>
<a id="__codelineno-94-13" name="__codelineno-94-13" href="#__codelineno-94-13"></a><span class="w">        </span><span class="nt">paths</span><span class="p">:</span>
<a id="__codelineno-94-14" name="__codelineno-94-14" href="#__codelineno-94-14"></a><span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<a id="__codelineno-94-15" name="__codelineno-94-15" href="#__codelineno-94-15"></a><span class="w">            </span><span class="nt">pathType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Prefix</span>
<a id="__codelineno-94-16" name="__codelineno-94-16" href="#__codelineno-94-16"></a><span class="w">            </span><span class="nt">backend</span><span class="p">:</span>
<a id="__codelineno-94-17" name="__codelineno-94-17" href="#__codelineno-94-17"></a><span class="w">              </span><span class="nt">service</span><span class="p">:</span>
<a id="__codelineno-94-18" name="__codelineno-94-18" href="#__codelineno-94-18"></a><span class="w">                </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api-service</span>
<a id="__codelineno-94-19" name="__codelineno-94-19" href="#__codelineno-94-19"></a><span class="w">                </span><span class="nt">port</span><span class="p">:</span>
<a id="__codelineno-94-20" name="__codelineno-94-20" href="#__codelineno-94-20"></a><span class="w">                  </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
</code></pre></div>
<p><strong>Generated HAProxy Configuration</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-95-1" name="__codelineno-95-1" href="#__codelineno-95-1"></a># Global section
<a id="__codelineno-95-2" name="__codelineno-95-2" href="#__codelineno-95-2"></a>userlist auth_default_auth-credentials
<a id="__codelineno-95-3" name="__codelineno-95-3" href="#__codelineno-95-3"></a>  user admin password $2y$05$...
<a id="__codelineno-95-4" name="__codelineno-95-4" href="#__codelineno-95-4"></a>
<a id="__codelineno-95-5" name="__codelineno-95-5" href="#__codelineno-95-5"></a># Backend section
<a id="__codelineno-95-6" name="__codelineno-95-6" href="#__codelineno-95-6"></a>http-request auth realm &quot;API Access&quot; unless { http_auth(auth_default_auth-credentials) }
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>auth-secret</code> to be set</p>
<p><strong>Related annotations</strong>: <code>auth-secret</code>, <code>auth-realm</code></p>
<p><strong>Implementation notes</strong>:
- Secret format: Opaque secret where key=username, value=base64-encoded password hash
- Supports cross-namespace secrets: <code>namespace/secretname</code>
- Automatic deduplication: multiple ingresses sharing the same secret generate a single userlist
- HAProxy 3.2+ uses bcrypt password hashing (not MD5 apr1)</p>
<hr />
<h3 id="haproxyorgauth-secret">haproxy.org/auth-secret<a class="headerlink" href="#haproxyorgauth-secret" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Reference to Kubernetes Secret containing authentication credentials. Supports cross-namespace format <code>namespace/secretname</code>.</p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-96-1" name="__codelineno-96-1" href="#__codelineno-96-1"></a><span class="c1"># Same namespace</span>
<a id="__codelineno-96-2" name="__codelineno-96-2" href="#__codelineno-96-2"></a><span class="nt">haproxy.org/auth-secret</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auth-credentials&quot;</span>
<a id="__codelineno-96-3" name="__codelineno-96-3" href="#__codelineno-96-3"></a>
<a id="__codelineno-96-4" name="__codelineno-96-4" href="#__codelineno-96-4"></a><span class="c1"># Cross-namespace</span>
<a id="__codelineno-96-5" name="__codelineno-96-5" href="#__codelineno-96-5"></a><span class="nt">haproxy.org/auth-secret</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;auth-system/shared-credentials&quot;</span>
</code></pre></div>
<p><strong>Secret format</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-97-1" name="__codelineno-97-1" href="#__codelineno-97-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<a id="__codelineno-97-2" name="__codelineno-97-2" href="#__codelineno-97-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<a id="__codelineno-97-3" name="__codelineno-97-3" href="#__codelineno-97-3"></a><span class="nt">metadata</span><span class="p">:</span>
<a id="__codelineno-97-4" name="__codelineno-97-4" href="#__codelineno-97-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">auth-credentials</span>
<a id="__codelineno-97-5" name="__codelineno-97-5" href="#__codelineno-97-5"></a><span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
<a id="__codelineno-97-6" name="__codelineno-97-6" href="#__codelineno-97-6"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<a id="__codelineno-97-7" name="__codelineno-97-7" href="#__codelineno-97-7"></a><span class="nt">data</span><span class="p">:</span>
<a id="__codelineno-97-8" name="__codelineno-97-8" href="#__codelineno-97-8"></a><span class="w">  </span><span class="c1"># Key: username</span>
<a id="__codelineno-97-9" name="__codelineno-97-9" href="#__codelineno-97-9"></a><span class="w">  </span><span class="c1"># Value: base64-encoded password hash (NOT htpasswd format)</span>
<a id="__codelineno-97-10" name="__codelineno-97-10" href="#__codelineno-97-10"></a><span class="w">  </span><span class="nt">admin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">JDJ5JDA1JG1OMVdWazVRbmJnNFF3ZEFkWGJmei44YjNjZUg2UTVLT1ZDS3hSMklrTkFmSmdMaTVwSUtX</span>
</code></pre></div>
<p><strong>Generate password hash</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-98-1" name="__codelineno-98-1" href="#__codelineno-98-1"></a><span class="c1"># Create bcrypt hash and encode to base64</span>
<a id="__codelineno-98-2" name="__codelineno-98-2" href="#__codelineno-98-2"></a>htpasswd<span class="w"> </span>-nbB<span class="w"> </span>admin<span class="w"> </span>mypassword<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d:<span class="w"> </span>-f2<span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-w0
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>auth-type: basic-auth</code></p>
<p><strong>Implementation notes</strong>:
- Value must be ONLY the password hash, NOT "username:hash" (htpasswd format)
- Multiple usernames supported: add multiple keys to the secret
- HAProxy 3.2+ supports bcrypt ($2y$), not MD5 apr1 ($apr1$)</p>
<hr />
<h3 id="haproxyorgauth-realm">haproxy.org/auth-realm<a class="headerlink" href="#haproxyorgauth-realm" title="Permanent link">&para;</a></h3>
<p><strong>Status</strong>:  Supported</p>
<p><strong>Description</strong>: Authentication realm displayed in browser's authentication prompt.</p>
<p><strong>Default</strong>: <code>RestrictedArea</code></p>
<p><strong>Usage</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-99-1" name="__codelineno-99-1" href="#__codelineno-99-1"></a><span class="nt">haproxy.org/auth-realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;API</span><span class="nv"> </span><span class="s">Access&quot;</span>
</code></pre></div>
<p><strong>Dependencies</strong>: Requires <code>auth-type: basic-auth</code> and <code>auth-secret</code></p>
<p><strong>Note</strong>: HAProxy Data Plane API requires realm without spaces (regex: <code>^[^\s]+$</code>). Use hyphenated names.</p>
<hr />
<h2 id="known-limitations">Known Limitations<a class="headerlink" href="#known-limitations" title="Permanent link">&para;</a></h2>
<h3 id="not-implemented">Not Implemented<a class="headerlink" href="#not-implemented" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Service-level annotations</strong> - Annotations on Service resources are not supported. Only Ingress annotations are implemented.</p>
</li>
<li>
<p><strong>Deprecated annotations</strong> - Legacy annotation names (<code>whitelist</code>, <code>blacklist</code>, <code>ingress.class</code>) are not implemented. Use current names instead.</p>
</li>
<li>
<p><strong>RequestMirror equivalent</strong> - No annotation-based traffic mirroring. Consider using Gateway API with external SPOE agent for this feature.</p>
</li>
</ol>
<h3 id="implementation-differences-from-haproxy-tech">Implementation Differences from HAProxy Tech<a class="headerlink" href="#implementation-differences-from-haproxy-tech" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Template-based approach</strong> - This implementation uses Jinja2-like templates (Gonja) rather than Go code, allowing users to customize behavior through template overrides.</p>
</li>
<li>
<p><strong>Resource-agnostic architecture</strong> - The controller doesn't have built-in annotation handling. All annotation support is provided through pluggable template libraries.</p>
</li>
<li>
<p><strong>Validation tests</strong> - Each annotation implementation includes comprehensive validation tests that run during chart development/testing.</p>
</li>
<li>
<p><strong>Secret format for auth</strong> - Password values must be base64-encoded hashes only, not htpasswd format (<code>username:hash</code>). This simplifies template logic and aligns with Kubernetes Secret best practices.</p>
</li>
</ol>
<h2 id="testing-coverage">Testing Coverage<a class="headerlink" href="#testing-coverage" title="Permanent link">&para;</a></h2>
<h3 id="well-tested">Well-tested<a class="headerlink" href="#well-tested" title="Permanent link">&para;</a></h3>
<p><strong>Authentication (3 annotations):</strong>
-  <code>auth-type</code>, <code>auth-secret</code>, <code>auth-realm</code>
-  Cross-namespace secret references
-  Custom realm values
-  Shared userlist deduplication
-  Invalid auth type error handling
-  Missing secret error handling</p>
<h3 id="other-annotations">Other Annotations<a class="headerlink" href="#other-annotations" title="Permanent link">&para;</a></h3>
<p>The remaining 51 annotations have varying levels of test coverage:
- <strong>47 fully supported annotations</strong> include validation tests in the template library
- <strong>0 partially implemented annotations</strong> - all features are either fully supported or not implemented
- <strong>3 not implemented annotations</strong> (including 2 deprecated) have no test coverage</p>
<h2 id="implementation-status-summary">Implementation Status Summary<a class="headerlink" href="#implementation-status-summary" title="Permanent link">&para;</a></h2>
<p><strong>Total annotations</strong>: 54</p>
<ul>
<li> <strong>Fully Supported</strong>: 51 (94.4%)</li>
<li>Access Control &amp; IP Filtering: 2 annotations (allowlist, denylist)</li>
<li>Authentication: 3 annotations (auth-type, auth-secret, auth-realm)</li>
<li>CORS: 6 annotations (enable, allow-origin, allow-methods, allow-headers, allow-credentials, max-age)</li>
<li>Rate Limiting: 4 annotations (requests, period, size, status-code)</li>
<li>Header Manipulation: 3 annotations (forwarded-for, request-set-header, response-set-header)</li>
<li>Path Manipulation: 1 annotation (path-rewrite)</li>
<li>Request Redirect: 2 annotations (request-redirect, request-redirect-code)</li>
<li>SSL/TLS: 4 annotations (ssl-redirect, ssl-redirect-code, ssl-redirect-port, ssl-passthrough)</li>
<li>Health Checks: 3 annotations (check, check-http, check-interval)</li>
<li>Load Balancing: 1 annotation (load-balance)</li>
<li>Session Persistence: 2 annotations (cookie-persistence, cookie-persistence-no-dynamic)</li>
<li>Timeouts: 8 annotations (server, client, connect, http-request, http-keep-alive, queue, tunnel, check)</li>
<li>Logging: 3 annotations (src-ip-header, request-capture, request-capture-len)</li>
<li>Host Manipulation: 1 annotation (set-host)</li>
<li>Connection Management: 1 annotation (pod-maxconn)</li>
<li>Server Scaling: 1 annotation (scale-server-slots)</li>
<li>Backend Server Options: 4 annotations (server-ssl, server-proto, server-crt, server-ca)</li>
<li>Proxy Protocol: 1 annotation (send-proxy-protocol)</li>
<li>
<p>Advanced Backend Config: 1 annotation (backend-config-snippet)</p>
</li>
<li>
<p> <strong>Partially Implemented</strong>: 0 (0%)</p>
</li>
<li>
<p> <strong>Not Implemented</strong>: 3 (5.6%)</p>
</li>
<li>1 annotation: standalone-backend (not planned - architecture already provides this functionality)</li>
<li>2 deprecated annotations: whitelist, blacklist (replaced by allowlist/denylist)</li>
</ul>
<h2 id="see-also">See Also<a class="headerlink" href="#see-also" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://www.haproxy.com/documentation/kubernetes-ingress/community/configuration-reference/ingress">HAProxy Ingress Controller Documentation</a></li>
<li><a href="https://github.com/haproxytech/kubernetes-ingress">HAProxy Ingress Controller Source Code</a></li>
<li><a href="./gateway-api-support.md">Gateway API Support</a> - For Gateway API resources (HTTPRoute, GRPCRoute)</li>
<li><a href="../CLAUDE.md">Template Library Architecture</a></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/HAProxy-Template-IC" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.instant", "search.highlight", "content.code.copy"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>